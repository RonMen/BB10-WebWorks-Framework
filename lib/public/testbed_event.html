<html>
    <head>
        <script type="text/javascript" src="local://require.js"></script>
        <script type="text/javascript" src="local://webworks.js"></script>
        <script type="text/javascript">
            var cb,
                intervalId,
                success = function (data, response) {
                    console.log("success callback: " + data);
                    intervalId = data;
                };

            function startListen() {
                cb = function (data) {
                    console.log("Yay! Data=" + data);
                };
                blackberry.system.event.onBatteryLevelChanged(cb);
            }

            function stopListen() {
                blackberry.system.event.onBatteryLevelChanged(null);
            }

            function startEvent() {
                webworks.exec(success, null, "bb.fakeevents", "start", null, false);
            }

            function stopEvent() {
                webworks.exec(success, null, "bb.fakeevents", "stop", { "intervalId": intervalId }, false);
            }
        </script>
    </head>
    <body>
        <div>This is a testbed!</div>
        <input type="button" onclick="startEvent()" value="Start Fake Event"><br>
        <input type="button" onclick="stopEvent()" value="Stop Fake Event"><br>
        <input type="button" onclick="startListen()" value="Start Listen"><br>
        <input type="button" onclick="stopListen()" value="Stop Listen"><br>
    </body>
</html>
